Short: eval_cost not cleared after UDP
Date: 981027
Type: Patch
State: Fixed
Author: Freaky
Long:

Ich habe dann noch einen Patch fuer dich:
Es gibt ein Problem, wenn der Driver ein UDP-Paket bekommt:
Die Eval-Cost wird nach dem Aufruf von master::receive_imp() nicht
gecleared, was dazu fuehrt, dass der naechste Spieler, der in derselben
Schleife abgearbeitet wird, nur noch die restlichen Evals, die nach
master::receive_imp() noch uebrig sind, zur Verfuegung hat. Dadurch kann es
schnell zu einer 'too long evaluation' kommen, die eigentlich nicht sein
sollte.

Der Patch ist auch noch als Attachment noch dran.

Patch:

diff -u -r src.org/comm1.c src/comm1.c
--- src.org/comm1.c	Mon Oct 26 12:19:10 1998
+++ src/comm1.c	Mon Oct 26 12:06:46 1998
@@ -1037,6 +1037,8 @@
 		push_string_malloced((udp_buf));
 		push_number(ntohs(addr.sin_port));
 		apply_master_ob(STR_RECEIVE_IMP, 3);
+		/* Freaky */
+		CLEAR_EVAL_COST;
 	    }
 	}
 #endif

Ciao
		Freaky

-- 
Frank 'Freaky' Kirschner
UNItopia Admin                          http://UNItopia.uni-stuttgart.de/
Freaky@UNItopia.Uni-Stuttgart.DE      telnet://UNItopia.uni-stuttgart.de/

--k+w/mQv8wyuph6w0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="eval.diff"

diff -u -r src.org/comm1.c src/comm1.c
--- src.org/comm1.c	Mon Oct 26 12:19:10 1998
+++ src/comm1.c	Mon Oct 26 12:06:46 1998
@@ -1037,6 +1037,8 @@
 		push_string_malloced((udp_buf));
 		push_number(ntohs(addr.sin_port));
 		apply_master_ob(STR_RECEIVE_IMP, 3);
+		/* Freaky */
+		CLEAR_EVAL_COST;
 	    }
 	}
 #endif

--k+w/mQv8wyuph6w0--


