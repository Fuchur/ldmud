Short: Faster callouts
From: "Dale Perkins" <elric@lpmud.com>
Date: 00/11/16
Type: Feature
State: New


I will make the diff, shoudl I email it to you or set it somewhere you can
ftp it from?
I just finished changing it so it will work on the new ldmud-23dev238
driver, there are a couple
of warnings but they may be warnings that show up anyways when compiling on
freebsd, I'm not sure. The code for fast_call_out is a bit of a cludge, I
just copied new_call_out to new_fast_call_out
and in new_call_out multiplied the time by 10. I didn't do much (translate
as any) documentation so let me explain a few things that might appear odd.
of to add tenths of a second to the tv_sec time you times tv_sec by 10 then
add tv_usec/100,000 but then its too big, so i added another variable called
big_time which is 90,000,000 hmm its always that i could prolly just define
it as that and remove that computation. Anyways the variable current_time is
now 10ths of seconds since teh epoch - 90 million. I fixed the efun time()
to get secs again but I still need to fix timestamp (actually I just
realized that i didnt) timestamps say its 1993 ;) ahh the good ol days :) hm
find_call_out, I have no idea what to do here. fast_call_outs and call_outs
are all together and there is no real way to tell them apart so
find_call_out returns 10ths of seconds left till its called

As for machine load, well i have been using the 'top' command and it still
doesnt even register as 1%
of cpu (an AMD K6-200) while using a slightly modified 2.4.5 lib and I am
not sure of any otehr way to test its usage.

Ok, this email is a mess, never write email while under the influence of
cold medicine, although coding this way is kinda neat ;'p

Elric

P.S. log on lpmud.com 8023

