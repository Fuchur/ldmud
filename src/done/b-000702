Short: dev.200 in UNItopia cores on fast connects
Date: Sat, 1 Jul 2000 09:20:58 +0200
From: Freaky <Freaky@UNItopia.RUS.Uni-Stuttgart.DE>
Type: Bug
State: Done - fixed

Analysis: This is most likely the telnet negotiation bug fixed in
209 and 213.

Ich habe gerade den dev-200 mehrmals gecrashed, indem ich immer wieder
connected habe und dann sofort disconnected.

Das Problem ist allerdings, dass ich das nur in UNItopia selbst machen
konnte, nicht aber im Testdriver. Irgendwie werden wohl in UNItopia noch
andere Objekte geladen, die das erst verursachen :(

Der Driver cored nach ca. 200 bis 500 Connects direkt hintereinander.

> > Ich habe gerade den dev-200 mehrmals gecrashed, indem ich immer wieder
> > connected habe und dann sofort disconnected.
>
> Wie sofort war der Disconnect: gleich wenn telnet mit 'Connected to'
> zuruckkommt, oder komplett eingeloggt und dann 'quit'? Oder
> verbindung abgebrochen?

Einfach zweimal return gedrueckt beim Einloggen (Bei UNItopia bewirkt
das, das beim ersten Return eine Hilfe angezeigt wird, und beim zweiten
Return disconnected das MUD, da das Login-Objekt zerstoert wird)

Das komische ist, dass ich das in Testdriver nicht nachvollziehen
konnte. Evtl. liegt das daran, dass telnet nur auf Port 23 eine
Negotiation macht, aber auf anderen Ports nicht. Sicher bin ich mir da
aber nicht.


---------

Ich habe hier ein sehr interessantes Debug-Log vom dev-200

Er ist mit einem Stack Overflow gecrashed...

2000.07.01 09:00:24 UDP recv-socket requested for port: 3335
2000.07.01 09:00:52 Unknown errno 32
2000.07.01 09:00:58 Unknown errno 32
2000.07.01 09:00:58 stack overflow
2000.07.01 09:00:58 program: apps/queued.c, object: apps/queued line 95
'     disconnect' in 'secure/master.c (/secure/master/connections.inc)' ('       secure/master')line 23
'       net_dead' in '  secure/obj/login.c' ('secure/obj/login#374')line 949
'         remove' in '  secure/obj/login.c' ('secure/obj/login#374')line 127
'prepare_destruct' in 'secure/master.c (/secure/master/destruct.inc)' ('       secure/master')line 108
'         logout' in '       apps/queued.c' ('         apps/queued')line 160
'   update_queue' in '       apps/queued.c' ('         apps/queued')line 122
'     info_queue' in '       apps/queued.c' ('         apps/queued')line 95
2000.07.01 09:00:58 Double fault, last error was: stack overflow
2000.07.01 09:00:58 stack overflow
2000.07.01 09:00:58 program: secure/master.c (/secure/master/log_error.inc), object: secure/master line 442
'     disconnect' in 'secure/master.c (/secure/master/connections.inc)' ('       secure/master')line 23
'       net_dead' in '  secure/obj/login.c' ('secure/obj/login#374')line 949
'         remove' in '  secure/obj/login.c' ('secure/obj/login#374')line 127
'  runtime_error' in 'secure/master.c (/secure/master/log_error.inc)' ('       secure/master')line 565
'log_runtime_error' in 'secure/master.c (/secure/master/log_error.inc)' ('       secure/master')line 442
2000.07.01 09:00:58 xfree: magic match failed
2000.07.01 09:00:58 Current object was secure/obj/login#374
2000.07.01 09:00:58 Dump of the call chain:
'     disconnect' in 'secure/master.c (/secure/master/connections.inc)' ('       secure/master')line 23
'       net_dead' in '  secure/obj/login.c' ('secure/obj/login#374')line 949
'         remove' in '  secure/obj/login.c' ('secure/obj/login#374')line 127
